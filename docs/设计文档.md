## 设计思路

见设计图

## 项目结构

- components：组件库
- fragments：渲染引擎
- utils：工具
- scripts：脚本
- type: 类型定义
- docs: 文件

## Base Component List

- Avatar
- Svg
- UnorderedList
- OrderdList
- TextArea
- Image
- Link
- Divider

## Config

1. 每个组件对应一个editor文件，表示可编辑属性
2. 组件初次渲染时，在props里面维护一个editor，表示编辑的属性，ConfigPanel根据editor展示，则修改editor，修改完成之后讲editor展开替换到props里面的其他属性

## What To do?

1. 组件库抽象，需要在后续组件完成时，直接放入组件库即可被加载，无需后续维护组件库代码
2. 解析JSON，加载组件库中的组件并进行渲染
3. 点击组件即可拿到相应的实例，并拿到挂载在vnode上对应的config

## Question

1. 内部维护一个<Button>Button</Button>，在页面的物料堆里只是一个名字比如myButton，我想在拖动的时候，拿到他的结构`{type:'button',props:{style:{backgroundColor:'red'}},children:[]}`，应该怎么做处理？

   - 通过require.context拿到的components是一个包含组件名字和结构的对象:

     ```javascript
     {
     	BaseButton: () => {…}
     	BaseInput: () => {…}
     }
     ```

   - value就是React.createElement需要的type

2. 渲染引擎应该在什么时候调用？

   - 在拖拽一个组件onDrag过程中获取坐标等信息，onDropOver的时候调用renderEngine

3. 多个组件组成的布局如何处理？

   - 画布本质上是一个root div，所有的component/container都会拼接到后面
   - 当一个组件里面嵌套了组件的时候，生成一个空白的默认组件描述结构，将id添加到parent的children里面